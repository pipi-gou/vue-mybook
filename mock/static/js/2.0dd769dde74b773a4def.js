webpackJsonp([2],{"5zde":function(e,t,o){o("zQR9"),o("qyJz"),e.exports=o("FeBl").Array.from},Gu7T:function(e,t,o){"use strict";t.__esModule=!0;var n,r=o("c/Tr"),a=(n=r)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return(0,a.default)(e)}},ZmIV:function(e,t){},"c/Tr":function(e,t,o){e.exports={default:o("5zde"),__esModule:!0}},fBQ2:function(e,t,o){"use strict";var n=o("evD5"),r=o("X8DO");e.exports=function(e,t,o){t in e?n.f(e,t,r(0,o)):e[t]=o}},pjeT:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("Gu7T"),r=o.n(n),a=o("Xxa5"),s=o.n(a),i=o("exGp"),c=o.n(i),u=o("uGP+"),f=o("gyMJ"),l={name:"list",components:{Mheader:u.a},mounted:function(){var e=this,t=this.$refs.scroll,o=t.offsetTop,n=0;t.addEventListener("touchstart",function(r){if(0==t.scrollTop&&t.offsetTop==o){var a=r.touches[0].pageY,s=function e(r){var s=r.touches[0].pageY;(n=s-a)>0?n<=50?t.style.top=n+o+"px":(n=50,t.style.top=o+50+"px"):(t.removeEventListener("touchmove",e),t.removeEventListener("touchend",i))},i=function r(a){clearInterval(e.timers),e.timers=setInterval(function(){if(n<=0)return clearInterval(e.timers),n=0,t.style.top=o+"px",t.removeEventListener("touchmove",s),t.removeEventListener("touchend",r),e.books=[],e.offset=0,void e.getData();n-=1,t.style.top=o+n+"px"},1)};t.addEventListener("touchmove",s),t.addEventListener("touchend",i)}},!1)},created:function(){this.getData()},methods:{add:function(){this.getData()},load:function(){var e=this;clearTimeout(this.time),this.time=setTimeout(function(){var t=e.$refs.scroll,o=t.scrollTop,n=t.clientHeight,r=t.scrollHeight;console.log(1),o+n+20>r&&e.getData()},10)},remove:function(e){var t=this;return c()(s.a.mark(function o(){return s.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log(1),o.next=3,Object(f.e)(e);case 3:t.books=t.books.filter(function(t){return t.bookId!==e});case 4:case"end":return o.stop()}},o,t)}))()},getData:function(){var e=this;return c()(s.a.mark(function t(){var o,n,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasMore||e.isLoading){t.next=11;break}return e.isLoading=!0,t.next=4,Object(f.d)(e.offset);case 4:o=t.sent,n=o.data.books,a=o.data.hasMore,e.books=[].concat(r()(e.books),r()(n)),e.hasMore=a,e.isLoading=!1,e.offset=e.books.length;case 11:case"end":return t.stop()}},t,e)}))()}},data:function(){return{books:[],offset:0,hasMore:!0,isLoading:!1}}},v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Mheader",{attrs:{back:!0}},[e._v("列表页")]),e._v(" "),o("div",{ref:"scroll",staticClass:"content",on:{scroll:e.load}},[o("ul",e._l(e.books,function(t,n){return o("router-link",{key:n,attrs:{to:{name:"detail",params:{bid:t.bookId}},tag:"li"}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.bookCover,expression:"book.bookCover"}],attrs:{alt:""}}),e._v(" "),o("div",[o("h4",[e._v(e._s(t.bookName))]),e._v(" "),o("p",[e._v(e._s(t.bookInfo))]),e._v(" "),o("b",[e._v(e._s(t.bookPrice))]),e._v(" "),o("button",{on:{click:function(o){o.stopPropagation(),e.remove(t.bookId)}}},[e._v("删除")])])])})),e._v(" "),o("div",{staticClass:"mloading",on:{click:e.add}},[e._v("加载更多")])])],1)},staticRenderFns:[]};var d=o("VU/8")(l,v,!1,function(e){o("ZmIV")},"data-v-e4cce2b0",null);t.default=d.exports},qyJz:function(e,t,o){"use strict";var n=o("+ZMJ"),r=o("kM2E"),a=o("sB3e"),s=o("msXi"),i=o("Mhyx"),c=o("QRG4"),u=o("fBQ2"),f=o("3fs2");r(r.S+r.F*!o("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,o,r,l,v=a(e),d="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,p=void 0!==m,b=0,k=f(v);if(p&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==k||d==Array&&i(k))for(o=new d(t=c(v.length));t>b;b++)u(o,b,p?m(v[b],b):v[b]);else for(l=k.call(v),o=new d;!(r=l.next()).done;b++)u(o,b,p?s(l,m,[r.value,b],!0):r.value);return o.length=b,o}})}});
//# sourceMappingURL=2.0dd769dde74b773a4def.js.map